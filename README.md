# ArchiveMaps 
#### 「座標も画像も、地球をメモ帳へ」、同期可能高機能メモアプリです。

# 目次
- [ダウンロード](#ダウンロード)
- [アプリの主機能](#アプリ主機能)
- [技術スタック](#技術スタック)
- [アピールポイント](#アピールポイント)

# ダウンロード
DeployGateから配布しております  
https://dply.me/tex2rn

# アプリ主機能
* GoogleMap上へマーカーを設置
  * マーカー一つ一つにはメモや画像、動画などを保存可能      


  
* 表示
  * Google Maps APIを使用した地図表示
  * 現在位置の表示
  * 作成したマーカーの一覧表示
  * 視覚的に理解しやすいアイコンを用いたボタン表示
  * Nominatim APIを用いたマーカーの住所表示    


* データ
  * 設置したマーカー情報をSQLデータベースで保存（アカウント同期が必要）
  * SQLデータベースにはそれぞれ「マーカー名」「メモ」「設置日時」「座標」「マーカーカラー」を保存
  * アカウントを用いないゲストモードでもローカルストレージ保存を用いて利用可能
 
* 検索機能
  * フィルタリング機能搭載
  * フィルタリング機能は主に「マーカー名」「メモ内容（完全一致検索）」「設置日時」で構成
  * Embeddings APIを用いたメモ内容の意味検索（アカウント同期が必要）



* アカウント同期
  * Supabase Authを使用した認証機能
  * メールアドレスとパスワードによるログイン
  * アカウント連携により別の端末でもメモを自由に管理
  * SQLデータベースに保存されたメモ内容から意味検索が可能

* オンボーディング機能
    * アプリ開始時、各操作スクリーンにオンボーディングを用いた視覚的にわかりやすい操作説明


# 技術スタック
* Jetpack ライブラリ
  * Navigation
  * ViewModel
  * DataStore
 
* 権限
  * Accompanist

* 依存性注入
  * Dagger Hilt

* 非同期処理
  * Kotlin Coroutines

* 通信
  * Moshi
  * Retrofit2
  * Okhttp3

## 連携API
 * [Maps SDK for Android](https://developers.google.com/maps/documentation/android-sdk/overview?hl=ja)  
   地図を表示する際に使用
 * [Nominatim](https://nominatim.org/)  
   マーカー情報の住所表示に使用
 * [Supabase](https://supabase.com/docs/guides/api)  
   Authを用いたアカウント認証やデータベースへマーカー情報の保存をする際に使用  
 * [Vector embeddings](https://platform.openai.com/docs/guides/embeddings)  
   検索ワードと保存されたメモ内容をベクトル化し、ユークリッド距離を計算するために使用。


# アピールポイント
 ## クリーンアーキテクチャとMVVMを意識した構造設計
   現在アプリケーションのみならず、あらゆる開発おける構造理念の一つにRobert C. Martin氏が提唱したクリーンアーキテクチャがあります。
   
   本アプリではレポジトリクラスによるデータアクセスの抽象化、及び依存性注入を行うことでクラス間での相互依存状態を改善し、依存関係の方向性を揃えることで単一方向のデータフローを構築しています。
   
   加えてViewModelを用いたUIロジック処理・状態管理を行うことで、UI層に過度な責任を負わせない、明確なる責任分離の形をとっており、これら構造設計によってテストの容易性が高く、拡張性のある構造を実現しています。

 ## SupabaseAuthによるアカウント認証とゲストモード
   SupabaseAuthを用いたアカウント認証により、各ユーザーのマーカー情報はDBに一度保存されるため、不意に自身の端末が故障して場合でも同じアカウントならば保存されたマーカーを表示・編集することが可能となります。
   
   加えて、複数人で同じアカウントを使用すれば、共同でマーカーを編集することも可能です。またアカウントセッションは保存しているため、アプリを一度閉じても再ログインは非常に簡単です。

さらにアカウント認証が不安なユーザーに向けてゲストモードも実装しています。多少機能が制限されますがローカルストレージ保存を用いているためマーカーの設置・編集・読み込みは変わらず利用できます。


 ## AIを用いた意味検索
   メモアプリは時間と共に保存されるメモ内容が増えていきます。そうなった場合、検索したいメモの内容を鮮明に思い出せない時があります。  
   本アプリではこのような問題に対処するためOpenAIのEmbeddings APIを用いた意味検索をフィルタリング機能として搭載しています。簡単な原理として以下の流れがあります。
   
「DBに保存されるマーカーのメモを全てベクトル化」  
 　　　　　　　↓  
「検索する際、検索ワードをベクトル化」  
 　　　　　　　↓  
「Supabase Postgres functionを呼び出すことで各メモのベクトルと検索ワードのベクトルのユークリッド距離を求める」  
 　　　　　　　↓  
「近しいメモを選定しアプリ内部で検索結果として表示」  


 ## アクセシビリティ
   本アプリはローディングアニメーションに加え、初めて起動された際には各機能のオンボーディングが表示されるようになっており、できる限りユーザーが迷子にならないように努めています。
   
   また各ボタンの配色は色覚異常を持つユーザーでも気兼ねなく扱えるように明確なコントラストを意識し、各UI要素には柔軟な配置を指定しているため仮にフォントサイズが拡大された際も変わらずサービスを利用できます。  

   
   加えて表示されるテキストはリソースを経由しているため、日本語以外にも対応することが容易になっています。
   
   









